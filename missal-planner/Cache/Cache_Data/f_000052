import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/OperatorView.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=af8bac28"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
var _s = $RefreshSig$();
import __vite__cjsImport1_react from "/node_modules/.vite/deps/react.js?v=af8bac28"; const React = __vite__cjsImport1_react.__esModule ? __vite__cjsImport1_react.default : __vite__cjsImport1_react; const useEffect = __vite__cjsImport1_react["useEffect"]; const useRef = __vite__cjsImport1_react["useRef"]; const useState = __vite__cjsImport1_react["useState"]; const useCallback = __vite__cjsImport1_react["useCallback"];
export default function OperatorView() {
  _s();
  const [songs, setSongs] = useState([]);
  const [selected, setSelected] = useState(null);
  const [previewText, setPreviewText] = useState("");
  const [viewportTop, setViewportTop] = useState(20);
  const [viewportHeight, setViewportHeight] = useState(180);
  const [isDragging, setIsDragging] = useState(false);
  const [isResizing, setIsResizing] = useState(false);
  const pageRef = useRef(null);
  const lineRefs = useRef([]);
  const dragOffsetRef = useRef(0);
  const resizeStartRef = useRef(0);
  const startHeightRef = useRef(0);
  const [pages, setPages] = useState([]);
  const [pageIndex, setPageIndex] = useState(0);
  const [isLive, setIsLive] = useState(false);
  const previousPage = pageIndex > 0 ? pages[pageIndex - 1] : null;
  const currentPage = pages[pageIndex] || "";
  const nextPage = pageIndex < pages.length - 1 ? pages[pageIndex + 1] : null;
  function splitIntoPages(text) {
    return text.split(/\n\s*\n/);
  }
  const openSong = (s) => {
    setSelected(s);
    const full = s.fullText || (Array.isArray(s.textChunks) ? s.textChunks.join("\n\n") : "") || s.nome || "";
    setPreviewText(full);
    const pg = splitIntoPages(full);
    setPages(pg);
    setPageIndex(0);
    setViewportTop(20);
    setViewportHeight(180);
  };
  useEffect(() => {
    if (!window.missalAPI?.onLoadSongList) return;
    const unsub = window.missalAPI.onLoadSongList((list) => {
      setSongs(list || []);
    });
    return unsub;
  }, []);
  useEffect(() => {
    if (!selected) {
      setPreviewText("");
      return;
    }
    const txt = selected.fullText || (Array.isArray(selected.textChunks) ? selected.textChunks.join("\n\n") : "");
    setPreviewText(txt);
    setViewportTop(20);
    setViewportHeight(180);
  }, [selected]);
  const lines = currentPage.split(/\r?\n/);
  const updateViewportPreview = useCallback(() => {
    if (!pageRef.current) return "";
    const container = pageRef.current;
    const viewTop = viewportTop;
    const viewBottom = viewportTop + viewportHeight;
    const visible = [];
    for (let i = 0; i < lineRefs.current.length; i++) {
      const el = lineRefs.current[i];
      if (!el) continue;
      const lineTop = el.offsetTop;
      const lineBottom = lineTop + el.offsetHeight;
      const lineMiddle = (lineTop + lineBottom) / 2;
      if (lineMiddle >= viewTop && lineMiddle <= viewBottom) {
        visible.push(lines[i]);
      }
    }
    const text = visible.join("\n");
    if (window.missalAPI?.setPreview) {
      window.missalAPI.setPreview({ text });
    }
    return text;
  }, [viewportTop, viewportHeight, lines]);
  useEffect(() => {
    const onMove = (e) => {
      if (!isDragging) return;
      if (!pageRef.current) return;
      const pageRect = pageRef.current.getBoundingClientRect();
      let y = e.clientY - pageRect.top - dragOffsetRef.current;
      const maxTop = Math.max(0, pageRect.height - viewportHeight - 10);
      if (y < 0) y = 0;
      if (y > maxTop) y = maxTop;
      setViewportTop(y);
      if (isLive) updateViewportPreview();
    };
    const onUp = () => {
      if (isDragging) setIsDragging(false);
      if (isResizing) setIsResizing(false);
      updateViewportPreview();
    };
    window.addEventListener("mousemove", onMove);
    window.addEventListener("mouseup", onUp);
    return () => {
      window.removeEventListener("mousemove", onMove);
      window.removeEventListener("mouseup", onUp);
    };
  }, [isDragging, isResizing, viewportHeight, updateViewportPreview]);
  const onViewportMouseDown = (e) => {
    if (!pageRef.current) return;
    const pageRect = pageRef.current.getBoundingClientRect();
    const localY = e.clientY - pageRect.top;
    dragOffsetRef.current = localY - viewportTop;
    setIsDragging(true);
  };
  const onResizeMouseDown = (e) => {
    e.stopPropagation();
    setIsResizing(true);
    resizeStartRef.current = e.clientY;
    startHeightRef.current = viewportHeight;
  };
  useEffect(() => {
    const onResizeMove = (e) => {
      if (!isResizing) return;
      if (!pageRef.current) return;
      const pageRect = pageRef.current.getBoundingClientRect();
      const dy = e.clientY - resizeStartRef.current;
      let newH = Math.max(40, startHeightRef.current + dy);
      const maxH = Math.max(40, pageRect.height - viewportTop - 10);
      if (newH > maxH) newH = maxH;
      setViewportHeight(newH);
    };
    window.addEventListener("mousemove", onResizeMove);
    return () => window.removeEventListener("mousemove", onResizeMove);
  }, [isResizing, viewportTop]);
  useEffect(() => {
    const visible = updateViewportPreview();
    if (isLive && window.missalAPI?.sendLive) {
      window.missalAPI.sendLive({ text: visible });
    }
  }, [viewportTop, viewportHeight, isLive, updateViewportPreview]);
  useEffect(() => {
    lineRefs.current = lineRefs.current.slice(0, lines.length);
  }, [lines.length]);
  return /* @__PURE__ */ jsxDEV("div", { style: { padding: 18, color: "#fff", background: "#111", minHeight: "100vh" }, children: [
    /* @__PURE__ */ jsxDEV("h2", { children: "Painel Operador — Versão 4 colunas" }, void 0, false, {
      fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
      lineNumber: 175,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV("div", { style: {
      display: "grid",
      gridTemplateColumns: "260px 1fr 1.6fr 1fr",
      gap: "12px",
      height: "80vh"
    }, children: [
      /* @__PURE__ */ jsxDEV("div", { style: { background: "#222", padding: 10, borderRadius: 8, overflow: "auto" }, children: [
        /* @__PURE__ */ jsxDEV("h3", { children: "Lista" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 186,
          columnNumber: 21
        }, this),
        songs.map(
          (s, i) => /* @__PURE__ */ jsxDEV(
            "div",
            {
              style: { padding: 8, borderBottom: "1px solid #333", cursor: "pointer" },
              onClick: () => openSong(s),
              children: /* @__PURE__ */ jsxDEV("div", { style: { fontWeight: 700 }, children: [
                s.numero || "",
                " — ",
                s.nome || s.title
              ] }, void 0, true, {
                fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
                lineNumber: 192,
                columnNumber: 29
              }, this)
            },
            i,
            false,
            {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 188,
              columnNumber: 11
            },
            this
          )
        )
      ] }, void 0, true, {
        fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
        lineNumber: 185,
        columnNumber: 17
      }, this),
      /* @__PURE__ */ jsxDEV("div", { style: { background: "#181818", padding: 10, borderRadius: 8 }, children: [
        /* @__PURE__ */ jsxDEV("h3", { children: "Página Anterior" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 201,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { style: {
          height: "70%",
          background: "#101010",
          border: "1px solid #333",
          borderRadius: 8,
          padding: 10,
          overflow: "auto",
          fontSize: "0.85rem",
          whiteSpace: "pre-wrap"
        }, children: previousPage || "(nenhuma)" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 203,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            disabled: !previousPage,
            onClick: () => previousPage && setPageIndex(pageIndex - 1),
            style: { marginTop: 10, width: "100%" },
            children: "Página anterior"
          },
          void 0,
          false,
          {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 216,
            columnNumber: 21
          },
          this
        )
      ] }, void 0, true, {
        fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
        lineNumber: 200,
        columnNumber: 17
      }, this),
      /* @__PURE__ */ jsxDEV("div", { style: { background: "#202020", padding: 10, borderRadius: 8 }, children: [
        /* @__PURE__ */ jsxDEV("h3", { children: "Página Atual — Projeção" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 227,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV(
          "div",
          {
            ref: pageRef,
            style: {
              position: "relative",
              height: "70%",
              background: "#000",
              border: "2px solid #555",
              borderRadius: 8,
              padding: "20px",
              overflow: "hidden",
              fontSize: "1.05rem",
              whiteSpace: "pre-wrap",
              lineHeight: "1.35rem"
            },
            children: [
              currentPage.split(/\r?\n/).map(
                (line, idx) => /* @__PURE__ */ jsxDEV(
                  "div",
                  {
                    ref: (el) => lineRefs.current[idx] = el,
                    style: { minHeight: "1.35rem" },
                    children: line === "" ? " " : line
                  },
                  idx,
                  false,
                  {
                    fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
                    lineNumber: 247,
                    columnNumber: 13
                  },
                  this
                )
              ),
              /* @__PURE__ */ jsxDEV(
                "div",
                {
                  style: {
                    position: "absolute",
                    left: 0,
                    right: 0,
                    top: viewportTop,
                    height: viewportHeight,
                    border: "2px solid #00b7ff",
                    background: "rgba(0, 183, 255, 0.10)",
                    cursor: "move"
                  },
                  onMouseDown: onViewportMouseDown,
                  children: /* @__PURE__ */ jsxDEV(
                    "div",
                    {
                      onMouseDown: onResizeMouseDown,
                      style: {
                        position: "absolute",
                        left: 0,
                        right: 0,
                        bottom: 0,
                        height: 10,
                        background: "rgba(0, 183, 255, 0.6)",
                        cursor: "ns-resize"
                      }
                    },
                    void 0,
                    false,
                    {
                      fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
                      lineNumber: 271,
                      columnNumber: 29
                    },
                    this
                  )
                },
                void 0,
                false,
                {
                  fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
                  lineNumber: 257,
                  columnNumber: 25
                },
                this
              )
            ]
          },
          void 0,
          true,
          {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 230,
            columnNumber: 21
          },
          this
        ),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: () => {
              const visible = updateViewportPreview();
              if (!isLive) {
                window.missalAPI.sendLive({ text: visible });
                setIsLive(true);
              } else {
                window.missalAPI.sendLive({ text: "" });
                setIsLive(false);
              }
            },
            style: { marginTop: 10, width: "100%" },
            children: isLive ? "Finalizar projeção" : "Projetar canto"
          },
          void 0,
          false,
          {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 287,
            columnNumber: 21
          },
          this
        )
      ] }, void 0, true, {
        fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
        lineNumber: 226,
        columnNumber: 17
      }, this),
      /* @__PURE__ */ jsxDEV("div", { style: { background: "#181818", padding: 10, borderRadius: 8 }, children: [
        /* @__PURE__ */ jsxDEV("h3", { children: "Página Seguinte" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 306,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { style: {
          height: "70%",
          background: "#101010",
          border: "1px solid #333",
          borderRadius: 8,
          padding: 10,
          overflow: "auto",
          fontSize: "0.85rem",
          whiteSpace: "pre-wrap"
        }, children: nextPage || "(fim)" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 308,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            disabled: !nextPage,
            onClick: () => nextPage && setPageIndex(pageIndex + 1),
            style: { marginTop: 10, width: "100%" },
            children: "Página seguinte"
          },
          void 0,
          false,
          {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 321,
            columnNumber: 21
          },
          this
        )
      ] }, void 0, true, {
        fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
        lineNumber: 305,
        columnNumber: 17
      }, this)
    ] }, void 0, true, {
      fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
      lineNumber: 177,
      columnNumber: 13
    }, this)
  ] }, void 0, true, {
    fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
    lineNumber: 174,
    columnNumber: 5
  }, this);
}
_s(OperatorView, "F4mNBCcT0FD8W/2Vn/vWUE1V4Bg=");
_c = OperatorView;
var _c;
$RefreshReg$(_c, "OperatorView");
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/projetos/missal-planner/src/pages/OperatorView.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/projetos/missal-planner/src/pages/OperatorView.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "C:/projetos/missal-planner/src/pages/OperatorView.jsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}

//# sourceMappingURL=data:application/json;base64,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O0FBQUEsK0JBQUMsUUFBRywrQkFBSjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQW1CO0FBQUEsUUFFbkIsdUJBQUMsU0FBSSxPQUFPO0FBQUEsVUFDUnJCLFFBQVE7QUFBQSxVQUNSZ0IsWUFBWTtBQUFBLFVBQ1phLFFBQVE7QUFBQSxVQUNSUixjQUFjO0FBQUEsVUFDZFAsU0FBUztBQUFBLFVBQ1RRLFVBQVU7QUFBQSxVQUNWUSxVQUFVO0FBQUEsVUFDVkMsWUFBWTtBQUFBLFFBQ2hCLEdBQ0s5RSxzQkFBWSxXQVZqQjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBV0E7QUFBQSxRQUVBO0FBQUEsVUFBQztBQUFBO0FBQUEsWUFDRyxVQUFVLENBQUNBO0FBQUFBLFlBQ1gsU0FBUyxNQUFNQSxZQUFZTCxhQUFhRCxZQUFZLENBQUM7QUFBQSxZQUNyRCxPQUFPLEVBQUVxRixXQUFXLElBQUlDLE9BQU8sT0FBTztBQUFBLFlBQUU7QUFBQTtBQUFBLFVBSDVDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQU1BO0FBQUEsV0F0Qko7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQXVCQTtBQUFBLFNBdkpKO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0F5SkE7QUFBQSxPQTVKSjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBNkpBO0FBRVI7QUFBQzVHLEdBelV1QkQsY0FBWTtBQUFBcUgsS0FBWnJIO0FBQVksSUFBQXFIO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJPcGVyYXRvclZpZXciLCJfcyIsInNvbmdzIiwic2V0U29uZ3MiLCJzZWxlY3RlZCIsInNldFNlbGVjdGVkIiwicHJldmlld1RleHQiLCJzZXRQcmV2aWV3VGV4dCIsInZpZXdwb3J0VG9wIiwic2V0Vmlld3BvcnRUb3AiLCJ2aWV3cG9ydEhlaWdodCIsInNldFZpZXdwb3J0SGVpZ2h0IiwiaXNEcmFnZ2luZyIsInNldElzRHJhZ2dpbmciLCJpc1Jlc2l6aW5nIiwic2V0SXNSZXNpemluZyIsInBhZ2VSZWYiLCJsaW5lUmVmcyIsImRyYWdPZmZzZXRSZWYiLCJyZXNpemVTdGFydFJlZiIsInN0YXJ0SGVpZ2h0UmVmIiwicGFnZXMiLCJzZXRQYWdlcyIsInBhZ2VJbmRleCIsInNldFBhZ2VJbmRleCIsImlzTGl2ZSIsInNldElzTGl2ZSIsInByZXZpb3VzUGFnZSIsImN1cnJlbnRQYWdlIiwibmV4dFBhZ2UiLCJsZW5ndGgiLCJzcGxpdEludG9QYWdlcyIsInRleHQiLCJzcGxpdCIsIm9wZW5Tb25nIiwicyIsImZ1bGwiLCJmdWxsVGV4dCIsIkFycmF5IiwiaXNBcnJheSIsInRleHRDaHVua3MiLCJqb2luIiwibm9tZSIsInBnIiwid2luZG93IiwibWlzc2FsQVBJIiwib25Mb2FkU29uZ0xpc3QiLCJ1bnN1YiIsImxpc3QiLCJ0eHQiLCJsaW5lcyIsInVwZGF0ZVZpZXdwb3J0UHJldmlldyIsImN1cnJlbnQiLCJjb250YWluZXIiLCJ2aWV3VG9wIiwidmlld0JvdHRvbSIsInZpc2libGUiLCJpIiwiZWwiLCJsaW5lVG9wIiwib2Zmc2V0VG9wIiwibGluZUJvdHRvbSIsIm9mZnNldEhlaWdodCIsImxpbmVNaWRkbGUiLCJwdXNoIiwic2V0UHJldmlldyIsIm9uTW92ZSIsImUiLCJwYWdlUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInkiLCJjbGllbnRZIiwidG9wIiwibWF4VG9wIiwiTWF0aCIsIm1heCIsImhlaWdodCIsIm9uVXAiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uVmlld3BvcnRNb3VzZURvd24iLCJsb2NhbFkiLCJvblJlc2l6ZU1vdXNlRG93biIsInN0b3BQcm9wYWdhdGlvbiIsIm9uUmVzaXplTW92ZSIsImR5IiwibmV3SCIsIm1heEgiLCJzZW5kTGl2ZSIsInNsaWNlIiwicGFkZGluZyIsImNvbG9yIiwiYmFja2dyb3VuZCIsIm1pbkhlaWdodCIsImRpc3BsYXkiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwiZ2FwIiwiYm9yZGVyUmFkaXVzIiwib3ZlcmZsb3ciLCJtYXAiLCJib3JkZXJCb3R0b20iLCJjdXJzb3IiLCJmb250V2VpZ2h0IiwibnVtZXJvIiwidGl0bGUiLCJib3JkZXIiLCJmb250U2l6ZSIsIndoaXRlU3BhY2UiLCJtYXJnaW5Ub3AiLCJ3aWR0aCIsInBvc2l0aW9uIiwibGluZUhlaWdodCIsImxpbmUiLCJpZHgiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJPcGVyYXRvclZpZXcuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9wYWdlcy9PcGVyYXRvclZpZXcuanN4XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBPcGVyYXRvclZpZXcoKSB7XHJcbiAgICBjb25zdCBbc29uZ3MsIHNldFNvbmdzXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFtzZWxlY3RlZCwgc2V0U2VsZWN0ZWRdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICBjb25zdCBbcHJldmlld1RleHQsIHNldFByZXZpZXdUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xyXG4gICAgY29uc3QgW3ZpZXdwb3J0VG9wLCBzZXRWaWV3cG9ydFRvcF0gPSB1c2VTdGF0ZSgyMCk7XHJcbiAgICBjb25zdCBbdmlld3BvcnRIZWlnaHQsIHNldFZpZXdwb3J0SGVpZ2h0XSA9IHVzZVN0YXRlKDE4MCk7XHJcbiAgICBjb25zdCBbaXNEcmFnZ2luZywgc2V0SXNEcmFnZ2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICBjb25zdCBbaXNSZXNpemluZywgc2V0SXNSZXNpemluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gICAgY29uc3QgcGFnZVJlZiA9IHVzZVJlZihudWxsKTtcclxuICAgIGNvbnN0IGxpbmVSZWZzID0gdXNlUmVmKFtdKTtcclxuICAgIGNvbnN0IGRyYWdPZmZzZXRSZWYgPSB1c2VSZWYoMCk7XHJcbiAgICBjb25zdCByZXNpemVTdGFydFJlZiA9IHVzZVJlZigwKTtcclxuICAgIGNvbnN0IHN0YXJ0SGVpZ2h0UmVmID0gdXNlUmVmKDApO1xyXG5cclxuICAgIGNvbnN0IFtwYWdlcywgc2V0UGFnZXNdID0gdXNlU3RhdGUoW10pOyAgICAgLy8gcMOhZ2luYXMgZG8gY2FudG8gKHNwbGl0IHBvciBcXG5cXG4gb3UgbWFyY2Fkb3IpXHJcbiAgICBjb25zdCBbcGFnZUluZGV4LCBzZXRQYWdlSW5kZXhdID0gdXNlU3RhdGUoMCk7XHJcbiAgICBjb25zdCBbaXNMaXZlLCBzZXRJc0xpdmVdID0gdXNlU3RhdGUoZmFsc2UpOyAgLy8gc2UgZXN0w6EgcHJvamV0YW5kbyBBTyBWSVZPXHJcblxyXG4gICAgLy8gcMOhZ2luYSBhbnRlcmlvciBlIHByw7N4aW1hXHJcbiAgICBjb25zdCBwcmV2aW91c1BhZ2UgPSBwYWdlSW5kZXggPiAwID8gcGFnZXNbcGFnZUluZGV4IC0gMV0gOiBudWxsO1xyXG4gICAgY29uc3QgY3VycmVudFBhZ2UgPSBwYWdlc1twYWdlSW5kZXhdIHx8IFwiXCI7XHJcbiAgICBjb25zdCBuZXh0UGFnZSA9IHBhZ2VJbmRleCA8IHBhZ2VzLmxlbmd0aCAtIDEgPyBwYWdlc1twYWdlSW5kZXggKyAxXSA6IG51bGw7XHJcblxyXG4gICAgZnVuY3Rpb24gc3BsaXRJbnRvUGFnZXModGV4dCkge1xyXG4gICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KC9cXG5cXHMqXFxuLyk7IC8vIGRpdmlkZSBxdWFuZG8gaMOhIGxpbmhhIGVtIGJyYW5jb1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9wZW5Tb25nID0gKHMpID0+IHtcclxuICAgICAgICBzZXRTZWxlY3RlZChzKTtcclxuXHJcbiAgICAgICAgLy8gMS4gRGVmaW5pciBvIHRleHRvIGRvIGNhbnRvXHJcbiAgICAgICAgY29uc3QgZnVsbCA9IHMuZnVsbFRleHRcclxuICAgICAgICAgICAgfHwgKEFycmF5LmlzQXJyYXkocy50ZXh0Q2h1bmtzKSA/IHMudGV4dENodW5rcy5qb2luKFwiXFxuXFxuXCIpIDogXCJcIilcclxuICAgICAgICAgICAgfHwgcy5ub21lXHJcbiAgICAgICAgICAgIHx8IFwiXCI7XHJcblxyXG4gICAgICAgIHNldFByZXZpZXdUZXh0KGZ1bGwpO1xyXG5cclxuICAgICAgICAvLyAyLiBHZXJhciBww6FnaW5hcyBhIHBhcnRpciBkbyB0ZXh0byByZWFsIGRvIGNhbnRvXHJcbiAgICAgICAgY29uc3QgcGcgPSBzcGxpdEludG9QYWdlcyhmdWxsKTtcclxuICAgICAgICBzZXRQYWdlcyhwZyk7XHJcblxyXG4gICAgICAgIC8vIDMuIFNlbXByZSBjb21lw6dhciBkYSBwcmltZWlyYSBww6FnaW5hXHJcbiAgICAgICAgc2V0UGFnZUluZGV4KDApO1xyXG5cclxuICAgICAgICAvLyA0LiBSZXNldGFyIGEgamFuZWxpbmhhXHJcbiAgICAgICAgc2V0Vmlld3BvcnRUb3AoMjApO1xyXG4gICAgICAgIHNldFZpZXdwb3J0SGVpZ2h0KDE4MCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cubWlzc2FsQVBJPy5vbkxvYWRTb25nTGlzdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gd2luZG93Lm1pc3NhbEFQSS5vbkxvYWRTb25nTGlzdCgobGlzdCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRTb25ncyhsaXN0IHx8IFtdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIXNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHNldFByZXZpZXdUZXh0KFwiXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHR4dCA9IHNlbGVjdGVkLmZ1bGxUZXh0IHx8IChBcnJheS5pc0FycmF5KHNlbGVjdGVkLnRleHRDaHVua3MpID8gc2VsZWN0ZWQudGV4dENodW5rcy5qb2luKFwiXFxuXFxuXCIpIDogXCJcIik7XHJcbiAgICAgICAgc2V0UHJldmlld1RleHQodHh0KTtcclxuICAgICAgICBzZXRWaWV3cG9ydFRvcCgyMCk7XHJcbiAgICAgICAgc2V0Vmlld3BvcnRIZWlnaHQoMTgwKTtcclxuICAgIH0sIFtzZWxlY3RlZF0pO1xyXG5cclxuICAgIGNvbnN0IGxpbmVzID0gY3VycmVudFBhZ2Uuc3BsaXQoL1xccj9cXG4vKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVWaWV3cG9ydFByZXZpZXcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwYWdlUmVmLmN1cnJlbnQpIHJldHVybiBcIlwiO1xyXG5cclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBwYWdlUmVmLmN1cnJlbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHZpZXdUb3AgPSB2aWV3cG9ydFRvcDtcclxuICAgICAgICBjb25zdCB2aWV3Qm90dG9tID0gdmlld3BvcnRUb3AgKyB2aWV3cG9ydEhlaWdodDtcclxuXHJcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVSZWZzLmN1cnJlbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWwgPSBsaW5lUmVmcy5jdXJyZW50W2ldO1xyXG4gICAgICAgICAgICBpZiAoIWVsKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIHBvc2nDp8OjbyByZWxhdGl2YSDDoCBww6FnaW5hIGF0dWFsXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVUb3AgPSBlbC5vZmZzZXRUb3A7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVCb3R0b20gPSBsaW5lVG9wICsgZWwub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lTWlkZGxlID0gKGxpbmVUb3AgKyBsaW5lQm90dG9tKSAvIDI7XHJcblxyXG4gICAgICAgICAgICBpZiAobGluZU1pZGRsZSA+PSB2aWV3VG9wICYmIGxpbmVNaWRkbGUgPD0gdmlld0JvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgdmlzaWJsZS5wdXNoKGxpbmVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGV4dCA9IHZpc2libGUuam9pbihcIlxcblwiKTtcclxuXHJcbiAgICAgICAgaWYgKHdpbmRvdy5taXNzYWxBUEk/LnNldFByZXZpZXcpIHtcclxuICAgICAgICAgICAgd2luZG93Lm1pc3NhbEFQSS5zZXRQcmV2aWV3KHsgdGV4dCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfSwgW3ZpZXdwb3J0VG9wLCB2aWV3cG9ydEhlaWdodCwgbGluZXNdKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9uTW92ZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoIXBhZ2VSZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBwYWdlUmVjdCA9IHBhZ2VSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgbGV0IHkgPSBlLmNsaWVudFkgLSBwYWdlUmVjdC50b3AgLSBkcmFnT2Zmc2V0UmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFRvcCA9IE1hdGgubWF4KDAsIHBhZ2VSZWN0LmhlaWdodCAtIHZpZXdwb3J0SGVpZ2h0IC0gMTApO1xyXG4gICAgICAgICAgICBpZiAoeSA8IDApIHkgPSAwO1xyXG4gICAgICAgICAgICBpZiAoeSA+IG1heFRvcCkgeSA9IG1heFRvcDtcclxuICAgICAgICAgICAgc2V0Vmlld3BvcnRUb3AoeSk7XHJcbiAgICAgICAgICAgIGlmIChpc0xpdmUpIHVwZGF0ZVZpZXdwb3J0UHJldmlldygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb25VcCA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHNldElzRHJhZ2dpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAoaXNSZXNpemluZykgc2V0SXNSZXNpemluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVZpZXdwb3J0UHJldmlldygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Nb3ZlKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25VcCk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Nb3ZlKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uVXApO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbaXNEcmFnZ2luZywgaXNSZXNpemluZywgdmlld3BvcnRIZWlnaHQsIHVwZGF0ZVZpZXdwb3J0UHJldmlld10pO1xyXG5cclxuICAgIGNvbnN0IG9uVmlld3BvcnRNb3VzZURvd24gPSAoZSkgPT4ge1xyXG4gICAgICAgIGlmICghcGFnZVJlZi5jdXJyZW50KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcGFnZVJlY3QgPSBwYWdlUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgbG9jYWxZID0gZS5jbGllbnRZIC0gcGFnZVJlY3QudG9wO1xyXG4gICAgICAgIGRyYWdPZmZzZXRSZWYuY3VycmVudCA9IGxvY2FsWSAtIHZpZXdwb3J0VG9wO1xyXG4gICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uUmVzaXplTW91c2VEb3duID0gKGUpID0+IHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHNldElzUmVzaXppbmcodHJ1ZSk7XHJcbiAgICAgICAgcmVzaXplU3RhcnRSZWYuY3VycmVudCA9IGUuY2xpZW50WTtcclxuICAgICAgICBzdGFydEhlaWdodFJlZi5jdXJyZW50ID0gdmlld3BvcnRIZWlnaHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb25SZXNpemVNb3ZlID0gKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpc1Jlc2l6aW5nKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICghcGFnZVJlZi5jdXJyZW50KSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VSZWN0ID0gcGFnZVJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBkeSA9IGUuY2xpZW50WSAtIHJlc2l6ZVN0YXJ0UmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGxldCBuZXdIID0gTWF0aC5tYXgoNDAsIHN0YXJ0SGVpZ2h0UmVmLmN1cnJlbnQgKyBkeSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heEggPSBNYXRoLm1heCg0MCwgcGFnZVJlY3QuaGVpZ2h0IC0gdmlld3BvcnRUb3AgLSAxMCk7XHJcbiAgICAgICAgICAgIGlmIChuZXdIID4gbWF4SCkgbmV3SCA9IG1heEg7XHJcbiAgICAgICAgICAgIHNldFZpZXdwb3J0SGVpZ2h0KG5ld0gpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25SZXNpemVNb3ZlKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25SZXNpemVNb3ZlKTtcclxuICAgIH0sIFtpc1Jlc2l6aW5nLCB2aWV3cG9ydFRvcF0pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9IHVwZGF0ZVZpZXdwb3J0UHJldmlldygpO1xyXG4gICAgICAgIGlmIChpc0xpdmUgJiYgd2luZG93Lm1pc3NhbEFQST8uc2VuZExpdmUpIHtcclxuICAgICAgICAgICAgd2luZG93Lm1pc3NhbEFQSS5zZW5kTGl2ZSh7IHRleHQ6IHZpc2libGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW3ZpZXdwb3J0VG9wLCB2aWV3cG9ydEhlaWdodCwgaXNMaXZlLCB1cGRhdGVWaWV3cG9ydFByZXZpZXddKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4geyBsaW5lUmVmcy5jdXJyZW50ID0gbGluZVJlZnMuY3VycmVudC5zbGljZSgwLCBsaW5lcy5sZW5ndGgpOyB9LCBbbGluZXMubGVuZ3RoXSk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6IDE4LCBjb2xvcjogXCIjZmZmXCIsIGJhY2tncm91bmQ6IFwiIzExMVwiLCBtaW5IZWlnaHQ6IFwiMTAwdmhcIiB9fT5cclxuICAgICAgICAgICAgPGgyPlBhaW5lbCBPcGVyYWRvciDigJQgVmVyc8OjbyA0IGNvbHVuYXM8L2gyPlxyXG5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJncmlkXCIsXHJcbiAgICAgICAgICAgICAgICBncmlkVGVtcGxhdGVDb2x1bW5zOiBcIjI2MHB4IDFmciAxLjZmciAxZnJcIixcclxuICAgICAgICAgICAgICAgIGdhcDogXCIxMnB4XCIsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiODB2aFwiXHJcbiAgICAgICAgICAgIH19PlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiAxIOKAlCBMaXN0YSBkb3MgQ2FudG9zICovfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBiYWNrZ3JvdW5kOiBcIiMyMjJcIiwgcGFkZGluZzogMTAsIGJvcmRlclJhZGl1czogOCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMz5MaXN0YTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAge3NvbmdzLm1hcCgocywgaSkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IDgsIGJvcmRlckJvdHRvbTogXCIxcHggc29saWQgIzMzM1wiLCBjdXJzb3I6IFwicG9pbnRlclwiIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvcGVuU29uZyhzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250V2VpZ2h0OiA3MDAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3MubnVtZXJvIHx8IFwiXCJ9IOKAlCB7cy5ub21lIHx8IHMudGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogMiDigJQgUMOhZ2luYSBBTlRFUklPUiAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYmFja2dyb3VuZDogXCIjMTgxODE4XCIsIHBhZGRpbmc6IDEwLCBib3JkZXJSYWRpdXM6IDggfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzPlDDoWdpbmEgQW50ZXJpb3I8L2gzPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCI3MCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjMTAxMDEwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgIzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjAuODVyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJwcmUtd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtwcmV2aW91c1BhZ2UgfHwgXCIobmVuaHVtYSlcIn1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXByZXZpb3VzUGFnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcHJldmlvdXNQYWdlICYmIHNldFBhZ2VJbmRleChwYWdlSW5kZXggLSAxKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMCwgd2lkdGg6IFwiMTAwJVwiIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQw6FnaW5hIGFudGVyaW9yXHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogMyDigJQgUMOhZ2luYSBBVFVBTCAoUHJvamXDp8OjbykgKi99XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJhY2tncm91bmQ6IFwiIzIwMjAyMFwiLCBwYWRkaW5nOiAxMCwgYm9yZGVyUmFkaXVzOiA4IH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMz5Qw6FnaW5hIEF0dWFsIOKAlCBQcm9qZcOnw6NvPC9oMz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIFDDoWdpbmEgQTQgdmlydHVhbCAqL31cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17cGFnZVJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiNzAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiMwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCIycHggc29saWQgIzU1NVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogXCIyMHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjEuMDVyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IFwiMS4zNXJlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIFJlbmRlcml6YcOnw6NvIGRhcyBsaW5oYXMgZGEgcMOhZ2luYSBhdHVhbCAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRQYWdlLnNwbGl0KC9cXHI/XFxuLykubWFwKChsaW5lLCBpZHgpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9eyhlbCkgPT4gKGxpbmVSZWZzLmN1cnJlbnRbaWR4XSA9IGVsKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtaW5IZWlnaHQ6IFwiMS4zNXJlbVwiIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmUgPT09IFwiXCIgPyBcIiBcIiA6IGxpbmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogPT09PSBKQU5FTEEgTcOTVkVMID09PT0gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogdmlld3BvcnRUb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydEhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwiMnB4IHNvbGlkICMwMGI3ZmZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcInJnYmEoMCwgMTgzLCAyNTUsIDAuMTApXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17b25WaWV3cG9ydE1vdXNlRG93bn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEhhbmRsZSBpbmZlcmlvciAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17b25SZXNpemVNb3VzZURvd259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJyZ2JhKDAsIDE4MywgMjU1LCAwLjYpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJucy1yZXNpemVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBCb3TDo28gZGUgcHJvamXDp8OjbyAqL31cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpc2libGUgPSB1cGRhdGVWaWV3cG9ydFByZXZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNMaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1pc3NhbEFQSS5zZW5kTGl2ZSh7IHRleHQ6IHZpc2libGUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXNMaXZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWlzc2FsQVBJLnNlbmRMaXZlKHsgdGV4dDogXCJcIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0xpdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCB3aWR0aDogXCIxMDAlXCIgfX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc0xpdmUgPyBcIkZpbmFsaXphciBwcm9qZcOnw6NvXCIgOiBcIlByb2pldGFyIGNhbnRvXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogNCDigJQgUMOhZ2luYSBTRUdVSU5URSAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYmFja2dyb3VuZDogXCIjMTgxODE4XCIsIHBhZGRpbmc6IDEwLCBib3JkZXJSYWRpdXM6IDggfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzPlDDoWdpbmEgU2VndWludGU8L2gzPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCI3MCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjMTAxMDEwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgIzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjAuODVyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJwcmUtd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuZXh0UGFnZSB8fCBcIihmaW0pXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFuZXh0UGFnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gbmV4dFBhZ2UgJiYgc2V0UGFnZUluZGV4KHBhZ2VJbmRleCArIDEpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCB3aWR0aDogXCIxMDAlXCIgfX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFDDoWdpbmEgc2VndWludGVcclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59XHJcbiJdLCJmaWxlIjoiQzovcHJvamV0b3MvbWlzc2FsLXBsYW5uZXIvc3JjL3BhZ2VzL09wZXJhdG9yVmlldy5qc3gifQ==