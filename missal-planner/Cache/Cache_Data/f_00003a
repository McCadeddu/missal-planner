import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/OperatorView.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=af8bac28"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
var _s = $RefreshSig$();
import __vite__cjsImport1_react from "/node_modules/.vite/deps/react.js?v=af8bac28"; const React = __vite__cjsImport1_react.__esModule ? __vite__cjsImport1_react.default : __vite__cjsImport1_react; const useEffect = __vite__cjsImport1_react["useEffect"]; const useRef = __vite__cjsImport1_react["useRef"]; const useState = __vite__cjsImport1_react["useState"]; const useCallback = __vite__cjsImport1_react["useCallback"];
export default function OperatorView() {
  _s();
  const [songs, setSongs] = useState([]);
  const [selected, setSelected] = useState(null);
  const [previewText, setPreviewText] = useState("");
  const [viewportTop, setViewportTop] = useState(20);
  const [viewportHeight, setViewportHeight] = useState(180);
  const [isDragging, setIsDragging] = useState(false);
  const [isResizing, setIsResizing] = useState(false);
  const pageRef = useRef(null);
  const lineRefs = useRef([]);
  const dragOffsetRef = useRef(0);
  const resizeStartRef = useRef(0);
  const startHeightRef = useRef(0);
  const [pages, setPages] = useState([]);
  const [pageIndex, setPageIndex] = useState(0);
  const [isLive, setIsLive] = useState(false);
  const previousPage = pageIndex > 0 ? pages[pageIndex - 1] : null;
  const currentPage = pages[pageIndex] || "";
  const nextPage = pageIndex < pages.length - 1 ? pages[pageIndex + 1] : null;
  useEffect(() => {
    if (!window.missalAPI?.onLoadSongList) return;
    const unsub = window.missalAPI.onLoadSongList((list) => {
      setSongs(list || []);
    });
    return unsub;
  }, []);
  useEffect(() => {
    if (!selected) {
      setPreviewText("");
      return;
    }
    const txt = selected.fullText || (Array.isArray(selected.textChunks) ? selected.textChunks.join("\n\n") : "");
    setPreviewText(txt);
    setViewportTop(20);
    setViewportHeight(180);
  }, [selected]);
  const lines = (previewText || "").split(/\r?\n/).map((l) => l === "" ? " " : l);
  const updateViewportPreview = useCallback(() => {
    if (!pageRef.current) return "";
    const pageRect = pageRef.current.getBoundingClientRect();
    const viewTop = pageRect.top + viewportTop;
    const viewBottom = viewTop + viewportHeight;
    const visible = [];
    for (let i = 0; i < lineRefs.current.length; i++) {
      const el = lineRefs.current[i];
      if (!el) continue;
      const r = el.getBoundingClientRect();
      const center = r.top + r.height / 2;
      if (center >= viewTop && center <= viewBottom) visible.push(lines[i]);
    }
    const text = visible.join("\n");
    if (window.missalAPI?.setPreview) window.missalAPI.setPreview({ text });
    return text;
  }, [viewportTop, viewportHeight, lines]);
  const sendLive = () => {
    const text = updateViewportPreview();
    if (window.missalAPI?.sendLive) window.missalAPI.sendLive({ text: text || "" });
    else
      alert("missalAPI.sendLive não disponível");
  };
  useEffect(() => {
    const onMove = (e) => {
      if (!isDragging) return;
      if (!pageRef.current) return;
      const pageRect = pageRef.current.getBoundingClientRect();
      let y = e.clientY - pageRect.top - dragOffsetRef.current;
      const maxTop = Math.max(0, pageRect.height - viewportHeight - 10);
      if (y < 0) y = 0;
      if (y > maxTop) y = maxTop;
      setViewportTop(y);
    };
    const onUp = () => {
      if (isDragging) setIsDragging(false);
      if (isResizing) setIsResizing(false);
      updateViewportPreview();
    };
    window.addEventListener("mousemove", onMove);
    window.addEventListener("mouseup", onUp);
    return () => {
      window.removeEventListener("mousemove", onMove);
      window.removeEventListener("mouseup", onUp);
    };
  }, [isDragging, isResizing, viewportHeight, updateViewportPreview]);
  const onViewportMouseDown = (e) => {
    if (!pageRef.current) return;
    const pageRect = pageRef.current.getBoundingClientRect();
    const localY = e.clientY - pageRect.top;
    dragOffsetRef.current = localY - viewportTop;
    setIsDragging(true);
  };
  const onResizeMouseDown = (e) => {
    e.stopPropagation();
    setIsResizing(true);
    resizeStartRef.current = e.clientY;
    startHeightRef.current = viewportHeight;
  };
  useEffect(() => {
    const onResizeMove = (e) => {
      if (!isResizing) return;
      if (!pageRef.current) return;
      const pageRect = pageRef.current.getBoundingClientRect();
      const dy = e.clientY - resizeStartRef.current;
      let newH = Math.max(40, startHeightRef.current + dy);
      const maxH = Math.max(40, pageRect.height - viewportTop - 10);
      if (newH > maxH) newH = maxH;
      setViewportHeight(newH);
    };
    window.addEventListener("mousemove", onResizeMove);
    return () => window.removeEventListener("mousemove", onResizeMove);
  }, [isResizing, viewportTop]);
  useEffect(() => {
    updateViewportPreview();
  }, [viewportTop, viewportHeight, updateViewportPreview]);
  useEffect(() => {
    lineRefs.current = lineRefs.current.slice(0, lines.length);
  }, [lines.length]);
  return /* @__PURE__ */ jsxDEV("div", { style: { padding: 18, minHeight: "100vh", background: "#0f1112", color: "#fff" }, children: [
    /* @__PURE__ */ jsxDEV("h2", { children: "Painel Operador — Projeção" }, void 0, false, {
      fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
      lineNumber: 136,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV("div", { style: { display: "flex", gap: 16 }, children: [
      /* @__PURE__ */ jsxDEV("div", { style: { width: 280, background: "#161616", padding: 10, borderRadius: 8 }, children: [
        /* @__PURE__ */ jsxDEV("h3", { children: "Lista" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 139,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { style: { maxHeight: "72vh", overflow: "auto" }, children: songs.map(
          (s, i) => /* @__PURE__ */ jsxDEV("div", { onClick: () => setSelected(s), style: { padding: 8, borderBottom: "1px solid #222", cursor: "pointer" }, children: [
            /* @__PURE__ */ jsxDEV("div", { style: { fontWeight: 700 }, children: [
              (s.numero || "") + (s.numero ? " — " : ""),
              s.nome || s.title
            ] }, void 0, true, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 143,
              columnNumber: 33
            }, this),
            s.fileType && /* @__PURE__ */ jsxDEV("div", { style: { fontSize: 12, color: "#9aa" }, children: s.fileType }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 144,
              columnNumber: 48
            }, this)
          ] }, i, true, {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 142,
            columnNumber: 13
          }, this)
        ) }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 140,
          columnNumber: 21
        }, this)
      ] }, void 0, true, {
        fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
        lineNumber: 138,
        columnNumber: 17
      }, this),
      /* @__PURE__ */ jsxDEV("div", { style: { flex: 1, position: "relative" }, children: [
        /* @__PURE__ */ jsxDEV("h3", { children: "Página A4 (colar / editar texto)" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 151,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { ref: pageRef, style: { maxWidth: 820, minHeight: 900, background: "#fff", color: "#000", padding: 28, borderRadius: 6, position: "relative", overflow: "hidden" }, children: [
          /* @__PURE__ */ jsxDEV("div", { style: { lineHeight: "1.45em", fontSize: 16, whiteSpace: "pre-wrap" }, children: lines.map(
            (L, idx) => /* @__PURE__ */ jsxDEV("div", { ref: (el) => lineRefs.current[idx] = el, style: { padding: "2px 0" }, children: L }, idx, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 155,
              columnNumber: 15
            }, this)
          ) }, void 0, false, {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 153,
            columnNumber: 25
          }, this),
          /* @__PURE__ */ jsxDEV("div", { onMouseDown: onViewportMouseDown, style: {
            position: "absolute",
            left: 12,
            right: 12,
            top: viewportTop,
            height: viewportHeight,
            borderTop: "4px solid rgba(255,255,255,0.95)",
            borderBottom: "4px solid rgba(255,255,255,0.95)",
            cursor: isDragging ? "grabbing" : "grab",
            boxSizing: "border-box",
            background: "transparent",
            display: "flex",
            flexDirection: "column",
            justifyContent: "space-between"
          }, children: [
            /* @__PURE__ */ jsxDEV("div", { style: { flex: 1 } }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 164,
              columnNumber: 29
            }, this),
            /* @__PURE__ */ jsxDEV("div", { onMouseDown: onResizeMouseDown, style: { height: 12, display: "flex", alignItems: "center", justifyContent: "center", cursor: "ns-resize", pointerEvents: "auto" }, children: /* @__PURE__ */ jsxDEV("div", { style: { width: 60, height: 4, background: "rgba(255,255,255,0.6)", borderRadius: 3 } }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 166,
              columnNumber: 33
            }, this) }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 165,
              columnNumber: 29
            }, this)
          ] }, void 0, true, {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 159,
            columnNumber: 25
          }, this)
        ] }, void 0, true, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 152,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { style: { marginTop: 12, display: "flex", gap: 8 }, children: [
          /* @__PURE__ */ jsxDEV("textarea", { value: previewText, onChange: (e) => setPreviewText(e.target.value), style: { flex: 1, minHeight: 140, borderRadius: 8, padding: 10, background: "#0b0b0b", color: "#eee", border: "1px solid #222" } }, void 0, false, {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 172,
            columnNumber: 25
          }, this),
          /* @__PURE__ */ jsxDEV("div", { style: { width: 160, display: "flex", flexDirection: "column", gap: 8 }, children: [
            /* @__PURE__ */ jsxDEV("button", { onClick: () => {
              if (!selected) return alert("Selecione um canto à esquerda.");
              if (window.missalAPI?.saveSongText) {
                window.missalAPI.saveSongText(selected, previewText).then((res) => {
                  if (res && res.ok) alert("Texto salvo: " + res.path);
                });
              } else alert("saveSongText não disponível");
            }, children: "Salvar Texto" }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 174,
              columnNumber: 29
            }, this),
            /* @__PURE__ */ jsxDEV("button", { onClick: () => {
              updateViewportPreview();
              alert("Preview atualizado.");
            }, children: "Atualizar Preview" }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 183,
              columnNumber: 29
            }, this),
            /* @__PURE__ */ jsxDEV("button", { onClick: sendLive, style: { background: "#e33", color: "#fff" }, children: "Enviar Ao Vivo (LIVE)" }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 185,
              columnNumber: 29
            }, this),
            /* @__PURE__ */ jsxDEV("button", { onClick: () => {
              if (selected && window.missalAPI?.openTextEditor) window.missalAPI.openTextEditor(selected);
              else
                alert("Abra o canto e use o campo para colar o texto.");
            }, children: "Abrir Editor Avançado" }, void 0, false, {
              fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
              lineNumber: 187,
              columnNumber: 29
            }, this)
          ] }, void 0, true, {
            fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
            lineNumber: 173,
            columnNumber: 25
          }, this)
        ] }, void 0, true, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 171,
          columnNumber: 21
        }, this)
      ] }, void 0, true, {
        fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
        lineNumber: 150,
        columnNumber: 17
      }, this),
      /* @__PURE__ */ jsxDEV("div", { style: { width: 320, background: "#161616", padding: 10, borderRadius: 8 }, children: [
        /* @__PURE__ */ jsxDEV("h3", { children: "Próxima página / Texto completo" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 196,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { style: { height: 420, overflow: "auto", background: "#0b0b0b", padding: 8, borderRadius: 6 }, children: /* @__PURE__ */ jsxDEV("pre", { style: { whiteSpace: "pre-wrap", color: "#ddd", fontSize: 14 }, children: selected?.fullText || "(texto do canto aqui)" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 198,
          columnNumber: 25
        }, this) }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 197,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { style: { marginTop: 10 }, children: /* @__PURE__ */ jsxDEV("button", { onClick: () => {
          if (!selected) return;
          if (!selected.textChunks || selected.textChunks.length <= 1) return alert("Sem próximas páginas (textChunks).");
          const idx = selected._currentChunkIdx || 0;
          const next = (idx + 1) % selected.textChunks.length;
          setPreviewText(selected.textChunks[next]);
          selected._currentChunkIdx = next;
        }, children: "Página seguinte" }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 202,
          columnNumber: 25
        }, this) }, void 0, false, {
          fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
          lineNumber: 201,
          columnNumber: 21
        }, this)
      ] }, void 0, true, {
        fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
        lineNumber: 195,
        columnNumber: 17
      }, this)
    ] }, void 0, true, {
      fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
      lineNumber: 137,
      columnNumber: 13
    }, this)
  ] }, void 0, true, {
    fileName: "C:/projetos/missal-planner/src/pages/OperatorView.jsx",
    lineNumber: 135,
    columnNumber: 5
  }, this);
}
_s(OperatorView, "F4mNBCcT0FD8W/2Vn/vWUE1V4Bg=");
_c = OperatorView;
var _c;
$RefreshReg$(_c, "OperatorView");
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/projetos/missal-planner/src/pages/OperatorView.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/projetos/missal-planner/src/pages/OperatorView.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "C:/projetos/missal-planner/src/pages/OperatorView.jsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}

//# sourceMappingURL=data:application/json;base64,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QUEsUUFDbkMsdUJBQUMsU0FBSSxPQUFPLEVBQUVoQyxRQUFRLEtBQUtrQyxVQUFVLFFBQVFQLFlBQVksV0FBV0YsU0FBUyxHQUFHTyxjQUFjLEVBQUUsR0FDNUYsaUNBQUMsU0FBSSxPQUFPLEVBQUVnQixZQUFZLFlBQVlwQixPQUFPLFFBQVFlLFVBQVUsR0FBRyxHQUFJakcsb0JBQVVpQyxZQUFZLDJCQUE1RjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQW9ILEtBRHhIO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFFQTtBQUFBLFFBRUEsdUJBQUMsU0FBSSxPQUFPLEVBQUVnRixXQUFXLEdBQUcsR0FDeEIsaUNBQUMsWUFBTyxTQUFTLE1BQU07QUFDbkIsY0FBSSxDQUFDakgsU0FBVTtBQUNmLGNBQUksQ0FBQ0EsU0FBU29DLGNBQWNwQyxTQUFTb0MsV0FBV1YsVUFBVSxFQUFHLFFBQU9pQyxNQUFNLG9DQUFvQztBQUM5RyxnQkFBTTZDLE1BQU14RyxTQUFTMkgsb0JBQW9CO0FBQ3pDLGdCQUFNQyxRQUFRcEIsTUFBTSxLQUFLeEcsU0FBU29DLFdBQVdWO0FBQzdDdkIseUJBQWVILFNBQVNvQyxXQUFXd0YsSUFBSSxDQUFDO0FBQ3hDNUgsbUJBQVMySCxtQkFBbUJDO0FBQUFBLFFBQ2hDLEdBQUcsK0JBUEg7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQU9rQixLQVJ0QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBU0E7QUFBQSxXQWZKO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFnQkE7QUFBQSxTQTFFSjtBQUFBO0FBQUE7QUFBQTtBQUFBLFdBMkVBO0FBQUEsT0E3RUo7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQThFQTtBQUVSO0FBQUMvSCxHQW5OdUJELGNBQVk7QUFBQWlJLEtBQVpqSTtBQUFZLElBQUFpSTtBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiT3BlcmF0b3JWaWV3IiwiX3MiLCJzb25ncyIsInNldFNvbmdzIiwic2VsZWN0ZWQiLCJzZXRTZWxlY3RlZCIsInByZXZpZXdUZXh0Iiwic2V0UHJldmlld1RleHQiLCJ2aWV3cG9ydFRvcCIsInNldFZpZXdwb3J0VG9wIiwidmlld3BvcnRIZWlnaHQiLCJzZXRWaWV3cG9ydEhlaWdodCIsImlzRHJhZ2dpbmciLCJzZXRJc0RyYWdnaW5nIiwiaXNSZXNpemluZyIsInNldElzUmVzaXppbmciLCJwYWdlUmVmIiwibGluZVJlZnMiLCJkcmFnT2Zmc2V0UmVmIiwicmVzaXplU3RhcnRSZWYiLCJzdGFydEhlaWdodFJlZiIsInBhZ2VzIiwic2V0UGFnZXMiLCJwYWdlSW5kZXgiLCJzZXRQYWdlSW5kZXgiLCJpc0xpdmUiLCJzZXRJc0xpdmUiLCJwcmV2aW91c1BhZ2UiLCJjdXJyZW50UGFnZSIsIm5leHRQYWdlIiwibGVuZ3RoIiwid2luZG93IiwibWlzc2FsQVBJIiwib25Mb2FkU29uZ0xpc3QiLCJ1bnN1YiIsImxpc3QiLCJ0eHQiLCJmdWxsVGV4dCIsIkFycmF5IiwiaXNBcnJheSIsInRleHRDaHVua3MiLCJqb2luIiwibGluZXMiLCJzcGxpdCIsIm1hcCIsImwiLCJ1cGRhdGVWaWV3cG9ydFByZXZpZXciLCJjdXJyZW50IiwicGFnZVJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ2aWV3VG9wIiwidG9wIiwidmlld0JvdHRvbSIsInZpc2libGUiLCJpIiwiZWwiLCJyIiwiY2VudGVyIiwiaGVpZ2h0IiwicHVzaCIsInRleHQiLCJzZXRQcmV2aWV3Iiwic2VuZExpdmUiLCJhbGVydCIsIm9uTW92ZSIsImUiLCJ5IiwiY2xpZW50WSIsIm1heFRvcCIsIk1hdGgiLCJtYXgiLCJvblVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvblZpZXdwb3J0TW91c2VEb3duIiwibG9jYWxZIiwib25SZXNpemVNb3VzZURvd24iLCJzdG9wUHJvcGFnYXRpb24iLCJvblJlc2l6ZU1vdmUiLCJkeSIsIm5ld0giLCJtYXhIIiwic2xpY2UiLCJwYWRkaW5nIiwibWluSGVpZ2h0IiwiYmFja2dyb3VuZCIsImNvbG9yIiwiZGlzcGxheSIsImdhcCIsIndpZHRoIiwiYm9yZGVyUmFkaXVzIiwibWF4SGVpZ2h0Iiwib3ZlcmZsb3ciLCJzIiwiYm9yZGVyQm90dG9tIiwiY3Vyc29yIiwiZm9udFdlaWdodCIsIm51bWVybyIsIm5vbWUiLCJ0aXRsZSIsImZpbGVUeXBlIiwiZm9udFNpemUiLCJmbGV4IiwicG9zaXRpb24iLCJtYXhXaWR0aCIsImxpbmVIZWlnaHQiLCJ3aGl0ZVNwYWNlIiwiTCIsImlkeCIsImxlZnQiLCJyaWdodCIsImJvcmRlclRvcCIsImJveFNpemluZyIsImZsZXhEaXJlY3Rpb24iLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJwb2ludGVyRXZlbnRzIiwibWFyZ2luVG9wIiwidGFyZ2V0IiwidmFsdWUiLCJib3JkZXIiLCJzYXZlU29uZ1RleHQiLCJ0aGVuIiwicmVzIiwib2siLCJwYXRoIiwib3BlblRleHRFZGl0b3IiLCJfY3VycmVudENodW5rSWR4IiwibmV4dCIsIl9jIiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIk9wZXJhdG9yVmlldy5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3BhZ2VzL09wZXJhdG9yVmlldy5qc3hcclxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE9wZXJhdG9yVmlldygpIHtcclxuICAgIGNvbnN0IFtzb25ncywgc2V0U29uZ3NdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgY29uc3QgW3NlbGVjdGVkLCBzZXRTZWxlY3RlZF0gPSB1c2VTdGF0ZShudWxsKTtcclxuICAgIGNvbnN0IFtwcmV2aWV3VGV4dCwgc2V0UHJldmlld1RleHRdID0gdXNlU3RhdGUoXCJcIik7XHJcbiAgICBjb25zdCBbdmlld3BvcnRUb3AsIHNldFZpZXdwb3J0VG9wXSA9IHVzZVN0YXRlKDIwKTtcclxuICAgIGNvbnN0IFt2aWV3cG9ydEhlaWdodCwgc2V0Vmlld3BvcnRIZWlnaHRdID0gdXNlU3RhdGUoMTgwKTtcclxuICAgIGNvbnN0IFtpc0RyYWdnaW5nLCBzZXRJc0RyYWdnaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICAgIGNvbnN0IFtpc1Jlc2l6aW5nLCBzZXRJc1Jlc2l6aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgICBjb25zdCBwYWdlUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3QgbGluZVJlZnMgPSB1c2VSZWYoW10pO1xyXG4gICAgY29uc3QgZHJhZ09mZnNldFJlZiA9IHVzZVJlZigwKTtcclxuICAgIGNvbnN0IHJlc2l6ZVN0YXJ0UmVmID0gdXNlUmVmKDApO1xyXG4gICAgY29uc3Qgc3RhcnRIZWlnaHRSZWYgPSB1c2VSZWYoMCk7XHJcblxyXG4gICAgY29uc3QgW3BhZ2VzLCBzZXRQYWdlc10gPSB1c2VTdGF0ZShbXSk7ICAgICAvLyBww6FnaW5hcyBkbyBjYW50byAoc3BsaXQgcG9yIFxcblxcbiBvdSBtYXJjYWRvcilcclxuICAgIGNvbnN0IFtwYWdlSW5kZXgsIHNldFBhZ2VJbmRleF0gPSB1c2VTdGF0ZSgwKTtcclxuICAgIGNvbnN0IFtpc0xpdmUsIHNldElzTGl2ZV0gPSB1c2VTdGF0ZShmYWxzZSk7ICAvLyBzZSBlc3TDoSBwcm9qZXRhbmRvIEFPIFZJVk9cclxuXHJcbiAgICAvLyBww6FnaW5hIGFudGVyaW9yIGUgcHLDs3hpbWFcclxuICAgIGNvbnN0IHByZXZpb3VzUGFnZSA9IHBhZ2VJbmRleCA+IDAgPyBwYWdlc1twYWdlSW5kZXggLSAxXSA6IG51bGw7XHJcbiAgICBjb25zdCBjdXJyZW50UGFnZSA9IHBhZ2VzW3BhZ2VJbmRleF0gfHwgXCJcIjtcclxuICAgIGNvbnN0IG5leHRQYWdlID0gcGFnZUluZGV4IDwgcGFnZXMubGVuZ3RoIC0gMSA/IHBhZ2VzW3BhZ2VJbmRleCArIDFdIDogbnVsbDtcclxuXHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5taXNzYWxBUEk/Lm9uTG9hZFNvbmdMaXN0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB3aW5kb3cubWlzc2FsQVBJLm9uTG9hZFNvbmdMaXN0KChsaXN0KSA9PiB7XHJcbiAgICAgICAgICAgIHNldFNvbmdzKGxpc3QgfHwgW10pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgc2V0UHJldmlld1RleHQoXCJcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdHh0ID0gc2VsZWN0ZWQuZnVsbFRleHQgfHwgKEFycmF5LmlzQXJyYXkoc2VsZWN0ZWQudGV4dENodW5rcykgPyBzZWxlY3RlZC50ZXh0Q2h1bmtzLmpvaW4oXCJcXG5cXG5cIikgOiBcIlwiKTtcclxuICAgICAgICBzZXRQcmV2aWV3VGV4dCh0eHQpO1xyXG4gICAgICAgIHNldFZpZXdwb3J0VG9wKDIwKTtcclxuICAgICAgICBzZXRWaWV3cG9ydEhlaWdodCgxODApO1xyXG4gICAgfSwgW3NlbGVjdGVkXSk7XHJcblxyXG4gICAgY29uc3QgbGluZXMgPSAocHJldmlld1RleHQgfHwgXCJcIikuc3BsaXQoL1xccj9cXG4vKS5tYXAobCA9PiBsID09PSBcIlwiID8gXCIgXCIgOiBsKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVWaWV3cG9ydFByZXZpZXcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwYWdlUmVmLmN1cnJlbnQpIHJldHVybiBcIlwiO1xyXG4gICAgICAgIGNvbnN0IHBhZ2VSZWN0ID0gcGFnZVJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHZpZXdUb3AgPSBwYWdlUmVjdC50b3AgKyB2aWV3cG9ydFRvcDtcclxuICAgICAgICBjb25zdCB2aWV3Qm90dG9tID0gdmlld1RvcCArIHZpZXdwb3J0SGVpZ2h0O1xyXG5cclxuICAgICAgICBjb25zdCB2aXNpYmxlID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lUmVmcy5jdXJyZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsID0gbGluZVJlZnMuY3VycmVudFtpXTtcclxuICAgICAgICAgICAgaWYgKCFlbCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gci50b3AgKyByLmhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgIGlmIChjZW50ZXIgPj0gdmlld1RvcCAmJiBjZW50ZXIgPD0gdmlld0JvdHRvbSkgdmlzaWJsZS5wdXNoKGxpbmVzW2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSB2aXNpYmxlLmpvaW4oXCJcXG5cIik7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5taXNzYWxBUEk/LnNldFByZXZpZXcpIHdpbmRvdy5taXNzYWxBUEkuc2V0UHJldmlldyh7IHRleHQgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRleHQ7XHJcbiAgICB9LCBbdmlld3BvcnRUb3AsIHZpZXdwb3J0SGVpZ2h0LCBsaW5lc10pO1xyXG5cclxuICAgIGNvbnN0IHNlbmRMaXZlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSB1cGRhdGVWaWV3cG9ydFByZXZpZXcoKTtcclxuICAgICAgICBpZiAod2luZG93Lm1pc3NhbEFQST8uc2VuZExpdmUpIHdpbmRvdy5taXNzYWxBUEkuc2VuZExpdmUoeyB0ZXh0OiB0ZXh0IHx8IFwiXCIgfSk7XHJcbiAgICAgICAgZWxzZSBhbGVydChcIm1pc3NhbEFQSS5zZW5kTGl2ZSBuw6NvIGRpc3BvbsOtdmVsXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9uTW92ZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoIXBhZ2VSZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBwYWdlUmVjdCA9IHBhZ2VSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgbGV0IHkgPSBlLmNsaWVudFkgLSBwYWdlUmVjdC50b3AgLSBkcmFnT2Zmc2V0UmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFRvcCA9IE1hdGgubWF4KDAsIHBhZ2VSZWN0LmhlaWdodCAtIHZpZXdwb3J0SGVpZ2h0IC0gMTApO1xyXG4gICAgICAgICAgICBpZiAoeSA8IDApIHkgPSAwO1xyXG4gICAgICAgICAgICBpZiAoeSA+IG1heFRvcCkgeSA9IG1heFRvcDtcclxuICAgICAgICAgICAgc2V0Vmlld3BvcnRUb3AoeSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBvblVwID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykgc2V0SXNEcmFnZ2luZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGlmIChpc1Jlc2l6aW5nKSBzZXRJc1Jlc2l6aW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgdXBkYXRlVmlld3BvcnRQcmV2aWV3KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdmUpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvblVwKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdmUpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25VcCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtpc0RyYWdnaW5nLCBpc1Jlc2l6aW5nLCB2aWV3cG9ydEhlaWdodCwgdXBkYXRlVmlld3BvcnRQcmV2aWV3XSk7XHJcblxyXG4gICAgY29uc3Qgb25WaWV3cG9ydE1vdXNlRG93biA9IChlKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwYWdlUmVmLmN1cnJlbnQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBwYWdlUmVjdCA9IHBhZ2VSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCBsb2NhbFkgPSBlLmNsaWVudFkgLSBwYWdlUmVjdC50b3A7XHJcbiAgICAgICAgZHJhZ09mZnNldFJlZi5jdXJyZW50ID0gbG9jYWxZIC0gdmlld3BvcnRUb3A7XHJcbiAgICAgICAgc2V0SXNEcmFnZ2luZyh0cnVlKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25SZXNpemVNb3VzZURvd24gPSAoZSkgPT4ge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgc2V0SXNSZXNpemluZyh0cnVlKTtcclxuICAgICAgICByZXNpemVTdGFydFJlZi5jdXJyZW50ID0gZS5jbGllbnRZO1xyXG4gICAgICAgIHN0YXJ0SGVpZ2h0UmVmLmN1cnJlbnQgPSB2aWV3cG9ydEhlaWdodDtcclxuICAgIH07XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBjb25zdCBvblJlc2l6ZU1vdmUgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzUmVzaXppbmcpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKCFwYWdlUmVmLmN1cnJlbnQpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgcGFnZVJlY3QgPSBwYWdlUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gZS5jbGllbnRZIC0gcmVzaXplU3RhcnRSZWYuY3VycmVudDtcclxuICAgICAgICAgICAgbGV0IG5ld0ggPSBNYXRoLm1heCg0MCwgc3RhcnRIZWlnaHRSZWYuY3VycmVudCArIGR5KTtcclxuICAgICAgICAgICAgY29uc3QgbWF4SCA9IE1hdGgubWF4KDQwLCBwYWdlUmVjdC5oZWlnaHQgLSB2aWV3cG9ydFRvcCAtIDEwKTtcclxuICAgICAgICAgICAgaWYgKG5ld0ggPiBtYXhIKSBuZXdIID0gbWF4SDtcclxuICAgICAgICAgICAgc2V0Vmlld3BvcnRIZWlnaHQobmV3SCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvblJlc2l6ZU1vdmUpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvblJlc2l6ZU1vdmUpO1xyXG4gICAgfSwgW2lzUmVzaXppbmcsIHZpZXdwb3J0VG9wXSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHsgdXBkYXRlVmlld3BvcnRQcmV2aWV3KCk7IH0sIFt2aWV3cG9ydFRvcCwgdmlld3BvcnRIZWlnaHQsIHVwZGF0ZVZpZXdwb3J0UHJldmlld10pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7IGxpbmVSZWZzLmN1cnJlbnQgPSBsaW5lUmVmcy5jdXJyZW50LnNsaWNlKDAsIGxpbmVzLmxlbmd0aCk7IH0sIFtsaW5lcy5sZW5ndGhdKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogMTgsIG1pbkhlaWdodDogXCIxMDB2aFwiLCBiYWNrZ3JvdW5kOiBcIiMwZjExMTJcIiwgY29sb3I6IFwiI2ZmZlwiIH19PlxyXG4gICAgICAgICAgICA8aDI+UGFpbmVsIE9wZXJhZG9yIOKAlCBQcm9qZcOnw6NvPC9oMj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiBcImZsZXhcIiwgZ2FwOiAxNiB9fT5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6IDI4MCwgYmFja2dyb3VuZDogXCIjMTYxNjE2XCIsIHBhZGRpbmc6IDEwLCBib3JkZXJSYWRpdXM6IDggfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzPkxpc3RhPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1heEhlaWdodDogXCI3MnZoXCIsIG92ZXJmbG93OiBcImF1dG9cIiB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3NvbmdzLm1hcCgocywgaSkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2l9IG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkKHMpfSBzdHlsZT17eyBwYWRkaW5nOiA4LCBib3JkZXJCb3R0b206IFwiMXB4IHNvbGlkICMyMjJcIiwgY3Vyc29yOiBcInBvaW50ZXJcIiB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRXZWlnaHQ6IDcwMCB9fT57KHMubnVtZXJvIHx8IFwiXCIpICsgKHMubnVtZXJvID8gXCIg4oCUIFwiIDogXCJcIil9e3Mubm9tZSB8fCBzLnRpdGxlfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzLmZpbGVUeXBlICYmIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEyLCBjb2xvcjogXCIjOWFhXCIgfX0+e3MuZmlsZVR5cGV9PC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmbGV4OiAxLCBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiIH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMz5Qw6FnaW5hIEE0IChjb2xhciAvIGVkaXRhciB0ZXh0byk8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPXtwYWdlUmVmfSBzdHlsZT17eyBtYXhXaWR0aDogODIwLCBtaW5IZWlnaHQ6IDkwMCwgYmFja2dyb3VuZDogXCIjZmZmXCIsIGNvbG9yOiBcIiMwMDBcIiwgcGFkZGluZzogMjgsIGJvcmRlclJhZGl1czogNiwgcG9zaXRpb246IFwicmVsYXRpdmVcIiwgb3ZlcmZsb3c6IFwiaGlkZGVuXCIgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbGluZUhlaWdodDogXCIxLjQ1ZW1cIiwgZm9udFNpemU6IDE2LCB3aGl0ZVNwYWNlOiBcInByZS13cmFwXCIgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZXMubWFwKChMLCBpZHgpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aWR4fSByZWY9e2VsID0+IChsaW5lUmVmcy5jdXJyZW50W2lkeF0gPSBlbCl9IHN0eWxlPXt7IHBhZGRpbmc6IFwiMnB4IDBcIiB9fT57TH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgb25Nb3VzZURvd249e29uVmlld3BvcnRNb3VzZURvd259IHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCBsZWZ0OiAxMiwgcmlnaHQ6IDEyLCB0b3A6IHZpZXdwb3J0VG9wLCBoZWlnaHQ6IHZpZXdwb3J0SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyVG9wOiBcIjRweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuOTUpXCIsIGJvcmRlckJvdHRvbTogXCI0cHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjk1KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBpc0RyYWdnaW5nID8gXCJncmFiYmluZ1wiIDogXCJncmFiXCIsIGJveFNpemluZzogXCJib3JkZXItYm94XCIsIGJhY2tncm91bmQ6IFwidHJhbnNwYXJlbnRcIiwgZGlzcGxheTogXCJmbGV4XCIsIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsIGp1c3RpZnlDb250ZW50OiBcInNwYWNlLWJldHdlZW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSB9fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBvbk1vdXNlRG93bj17b25SZXNpemVNb3VzZURvd259IHN0eWxlPXt7IGhlaWdodDogMTIsIGRpc3BsYXk6IFwiZmxleFwiLCBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLCBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIiwgY3Vyc29yOiBcIm5zLXJlc2l6ZVwiLCBwb2ludGVyRXZlbnRzOiBcImF1dG9cIiB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiA2MCwgaGVpZ2h0OiA0LCBiYWNrZ3JvdW5kOiBcInJnYmEoMjU1LDI1NSwyNTUsMC42KVwiLCBib3JkZXJSYWRpdXM6IDMgfX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEyLCBkaXNwbGF5OiBcImZsZXhcIiwgZ2FwOiA4IH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgdmFsdWU9e3ByZXZpZXdUZXh0fSBvbkNoYW5nZT17KGUpID0+IHNldFByZXZpZXdUZXh0KGUudGFyZ2V0LnZhbHVlKX0gc3R5bGU9e3sgZmxleDogMSwgbWluSGVpZ2h0OiAxNDAsIGJvcmRlclJhZGl1czogOCwgcGFkZGluZzogMTAsIGJhY2tncm91bmQ6IFwiIzBiMGIwYlwiLCBjb2xvcjogXCIjZWVlXCIsIGJvcmRlcjogXCIxcHggc29saWQgIzIyMlwiIH19IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6IDE2MCwgZGlzcGxheTogXCJmbGV4XCIsIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsIGdhcDogOCB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWQpIHJldHVybiBhbGVydChcIlNlbGVjaW9uZSB1bSBjYW50byDDoCBlc3F1ZXJkYS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5taXNzYWxBUEk/LnNhdmVTb25nVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWlzc2FsQVBJLnNhdmVTb25nVGV4dChzZWxlY3RlZCwgcHJldmlld1RleHQpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLm9rKSBhbGVydChcIlRleHRvIHNhbHZvOiBcIiArIHJlcy5wYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGFsZXJ0KFwic2F2ZVNvbmdUZXh0IG7Do28gZGlzcG9uw612ZWxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT5TYWx2YXIgVGV4dG88L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgdXBkYXRlVmlld3BvcnRQcmV2aWV3KCk7IGFsZXJ0KFwiUHJldmlldyBhdHVhbGl6YWRvLlwiKTsgfX0+QXR1YWxpemFyIFByZXZpZXc8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3NlbmRMaXZlfSBzdHlsZT17eyBiYWNrZ3JvdW5kOiBcIiNlMzNcIiwgY29sb3I6IFwiI2ZmZlwiIH19PkVudmlhciBBbyBWaXZvIChMSVZFKTwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCAmJiB3aW5kb3cubWlzc2FsQVBJPy5vcGVuVGV4dEVkaXRvcikgd2luZG93Lm1pc3NhbEFQSS5vcGVuVGV4dEVkaXRvcihzZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBhbGVydChcIkFicmEgbyBjYW50byBlIHVzZSBvIGNhbXBvIHBhcmEgY29sYXIgbyB0ZXh0by5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT5BYnJpciBFZGl0b3IgQXZhbsOnYWRvPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyB3aWR0aDogMzIwLCBiYWNrZ3JvdW5kOiBcIiMxNjE2MTZcIiwgcGFkZGluZzogMTAsIGJvcmRlclJhZGl1czogOCB9fT5cclxuICAgICAgICAgICAgICAgICAgICA8aDM+UHLDs3hpbWEgcMOhZ2luYSAvIFRleHRvIGNvbXBsZXRvPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGhlaWdodDogNDIwLCBvdmVyZmxvdzogXCJhdXRvXCIsIGJhY2tncm91bmQ6IFwiIzBiMGIwYlwiLCBwYWRkaW5nOiA4LCBib3JkZXJSYWRpdXM6IDYgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgc3R5bGU9e3sgd2hpdGVTcGFjZTogXCJwcmUtd3JhcFwiLCBjb2xvcjogXCIjZGRkXCIsIGZvbnRTaXplOiAxNCB9fT57c2VsZWN0ZWQ/LmZ1bGxUZXh0IHx8IFwiKHRleHRvIGRvIGNhbnRvIGFxdWkpXCJ9PC9wcmU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMCB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkLnRleHRDaHVua3MgfHwgc2VsZWN0ZWQudGV4dENodW5rcy5sZW5ndGggPD0gMSkgcmV0dXJuIGFsZXJ0KFwiU2VtIHByw7N4aW1hcyBww6FnaW5hcyAodGV4dENodW5rcykuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWQuX2N1cnJlbnRDaHVua0lkeCB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IChpZHggKyAxKSAlIHNlbGVjdGVkLnRleHRDaHVua3MubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldmlld1RleHQoc2VsZWN0ZWQudGV4dENodW5rc1tuZXh0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZC5fY3VycmVudENodW5rSWR4ID0gbmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX0+UMOhZ2luYSBzZWd1aW50ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufVxyXG4iXSwiZmlsZSI6IkM6L3Byb2pldG9zL21pc3NhbC1wbGFubmVyL3NyYy9wYWdlcy9PcGVyYXRvclZpZXcuanN4In0=